{"version":3,"sources":["assets/logo.svg","components/Input.js","hooks/useToc.js","components/ArticleWrapper.js","utils/index.js","App.js","reportWebVitals.js","index.js"],"names":["Input","setParentValue","onSubmit","value","isLoading","handleExample","inputEl","useRef","useState","valid","setValid","shaking","setShaking","handleSubmit","e","preventDefault","test","setTimeout","style","height","className","size","src","Logo","as","m","textAlign","ref","mt","aria-label","onChange","handleChange","target","type","autoFocus","name","variant","minWidth","placeholder","Button","onClick","UseToc","navRef","toc","setToc","active","setActive","useEffect","headings","document","getElementById","querySelectorAll","tableOfContents","navHeight","el","offsetHeight","getComputedStyle","parseInt","marginTop","marginBottom","outerHeight","current","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","id","root","rootMargin","threshold","heading","hash","title","innerText","tagName","console","log","obj","push","observe","window","addEventListener","location","substring","scrollTo","offsetTop","activeLink","querySelector","parent","closest","scrollTop","paddingTop","ArticleWrapper","article","close","getTextbundle","author","siteName","setIsLoading","siteUrl","position","zIndex","top","role","maxHeight","overscrollBehavior","map","item","index","paddingLeft","href","key","toLowerCase","replace","dangerouslySetInnerHTML","getMeteredContentElement","doc","getElementsByClassName","App","__html","simplifiedArticle","setSimplifiedArticle","articleTitle","setArticleTitle","setAuthor","setSiteName","setValue","setSiteUrl","options","serializer","x","setAttribute","innerHTML","a","getArticleContent","response","getBlobs","stripIframes","iFrame","parentNode","removeChild","getRedirectUrl","fetch","method","body","then","res","json","responseStream","url","parser","DOMParser","text","parseFromString","status","reader","Readability","parse","byline","content","images","img","blob","objectURL","URL","createObjectURL","srcset","removeAttribute","proxiedImageUrl","getMarkDown","parentElement","outerHTML","turndownService","TurndownService","cleanAttribute","attribute","addRule","filter","replacement","node","alt","getAttribute","titlePart","markdown","turndown","Blob","zip","JSZip","folder","imageUrl","dataset","orgsrc","filename","substr","lastIndexOf","filenameDecoded","decodeURI","imageFile","File","file","markdownFile","generateAsync","saveAs","length","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.bc34a122.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.1406ea11.svg\";","import { useState, useRef } from \"react\";\nimport Button, {\n  ButtonInvisible,\n  ButtonPrimary,\n} from \"@primer/components/lib/Button\";\nimport Spinner from \"@primer/components/lib/Spinner\";\nimport Box from \"@primer/components/lib/Box\";\nimport Text from \"@primer/components/lib/Text\";\nimport TextInput from \"@primer/components/lib/TextInput\";\nimport Logo from \"../assets/logo.svg\";\n\nconst Input = ({\n  setParentValue,\n  onSubmit,\n  value,\n  isLoading,\n  handleExample,\n}) => {\n  const inputEl = useRef(null);\n\n  const [valid, setValid] = useState(true);\n  const [shaking, setShaking] = useState(\"\");\n\n  const handleChange = (e) => {\n    setValid(true);\n    setParentValue(e);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (\n      /(^|\\s)((https?:\\/\\/)?[\\w-]+(\\.[\\w-]+)+\\.?(:\\d+)?(\\/\\S*)?)/gi.test(value)\n    ) {\n      setValid(true);\n      onSubmit(value);\n    } else {\n      setValid(false);\n      setShaking(\" url-invalid-shake\");\n      setTimeout(function () {\n        setShaking(\"\");\n      }, 500);\n    }\n  };\n\n  return (\n    <>\n      {isLoading ? (\n        <Box\n          style={{ height: \"100vh\" }}\n          className=\" d-flex flex-justify-center flex-items-center\"\n        >\n          <Spinner size=\"large\" />\n        </Box>\n      ) : (\n        <Box className=\"wrapper\">\n          <img src={Logo} />\n          <Text as=\"p\" m={3} textAlign=\"center\">\n            Download & read articles as Markdown\n          </Text>\n\n          <form onSubmit={(e) => handleSubmit(e)}>\n            <div ref={inputEl} className={\"input-container\" + shaking}>\n              <div className=\"link\">\n                <TextInput\n                  mt=\"4\"\n                  className={\n                    valid ? `source-input` : `source-input input-invalid`\n                  }\n                  aria-label=\"url\"\n                  onChange={(e) => handleChange(e.target.value)}\n                  type=\"text\"\n                  value={value}\n                  autoFocus\n                  name=\"title\"\n                  variant=\"large\"\n                  minWidth=\"300px\"\n                  placeholder=\"Enter Article URL...\"\n                />\n              </div>\n            </div>\n            <ButtonPrimary variant=\"large\">Create Markdown</ButtonPrimary>\n            <ButtonInvisible mt={3} onClick={() => handleExample()}>\n              See an example ›\n            </ButtonInvisible>\n          </form>\n        </Box>\n      )}\n    </>\n  );\n};\n\nexport default Input;\n","import { useEffect, useState } from 'react'\n\nfunction UseToc(navRef) {\n    const [toc, setToc] = useState();\n    const [active, setActive] = useState();\n\n    const outerHeight = (el) => {\n        var height = el.offsetHeight;\n        var style = getComputedStyle(el);\n        height += parseInt(style.marginTop) + parseInt(style.marginBottom);\n        return height;\n    }\n\n    useEffect(() => {\n        const headings = document\n            .getElementById(\"content\")\n            .querySelectorAll(\"h1, h2, h3\");\n        let tableOfContents = [];\n        const navHeight = outerHeight(navRef.current);\n\n        let callback = (entries) => {\n            entries.forEach((entry) => {\n                if (!entry.isIntersecting) {\n                    return;\n                }\n                setActive(entry.target.id);\n            });\n        };\n\n\n\n        let options = {\n            root: null,\n            rootMargin: navHeight + \"px\",\n            threshold: 0,\n        };\n\n        const observer = new IntersectionObserver(callback, options);\n\n        for (let heading of headings) {\n            let hash = heading.id;\n            let title = heading.innerText;\n            let tagName = heading.tagName;\n            console.log({ heading });\n            let obj = { title, hash, tagName };\n            tableOfContents.push(obj);\n\n            observer.observe(heading);\n        }\n\n        setToc(tableOfContents);\n\n        window.addEventListener(\n            \"hashchange\",\n            function (e) {\n                e.preventDefault();\n\n                const target = document.getElementById(\n                    window.location.hash.substring(1)\n                );\n                console.log({ target });\n                window.scrollTo(0, target.offsetTop - navHeight);\n            },\n            false\n        );\n    }, [navRef]);\n\n\n    useEffect(() => {\n        const activeLink = document.querySelector(`a[href='#${active}']`);\n        if (!activeLink) return;\n        const parent = activeLink.closest(\"div\");\n        parent.scrollTop =\n            activeLink.offsetTop - parseInt(getComputedStyle(parent).paddingTop);\n    }, [active]);\n\n    return [toc, active]\n}\n\nexport default UseToc\n","import { useEffect, useRef } from \"react\";\nimport { DownloadIcon, ListUnorderedIcon } from \"@primer/octicons-react\";\nimport { Button, Box, ButtonPrimary } from \"@primer/components\";\nimport UseToc from \"../hooks/useToc\";\n\nconst ArticleWrapper = ({\n  article,\n  close,\n  title,\n  author,\n  siteName,\n  getTextbundle,\n  setIsLoading,\n  siteUrl,\n}) => {\n\n  const navRef = useRef(null);\n  const [toc, active] = UseToc(navRef)\n\n  useEffect(() => setIsLoading(), [setIsLoading]);\n\n  return (\n    <div className=\"container-lg clearfix new-discussion-timeline px-3 px-md-4 px-lg-5 mt-3\">\n\n      <nav className=\"file-navigation mb-3 d-flex flex-items-start\">\n        <Button onClick={() => close()}>Go Home</Button>\n        <div className=\"flex-auto\"></div>\n        <ButtonPrimary onClick={() => getTextbundle()}>\n          <DownloadIcon size={16} /> Download\n        </ButtonPrimary>\n      </nav>\n\n      <Box className=\"Box md js-code-block-container Box--responsive\">\n        <div\n          className=\"d-flex js-sticky js-position-sticky top-0 border-top-0 border-bottom p-2 flex-items-center flex-justify-between color-bg-primary rounded-top-2\"\n          ref={navRef}\n          style={{ position: \"sticky\", zIndex: \"90\", top: \"0px !important\" }}\n        >\n          <div className=\"d-flex flex-items-center\">\n            <details className=\"details-reset details-overlay\">\n              <summary role=\"button\" className=\"btn btn-octicon m-0 mr-2 p-2\">\n                <ListUnorderedIcon\n                  size={16}\n                  className=\"octicon octicon-list-unordered\"\n                />\n              </summary>\n              <div className=\"SelectMenu\">\n                <div\n                  className=\"SelectMenu-modal rounded-3 mt-1\"\n                  style={{ maxHeight: \"340px\" }}\n                >\n                  <div\n                    className=\"SelectMenu-list SelectMenu-list--borderless p-2\"\n                    style={{ overscrollBehavior: \"contain\" }}\n                  >\n                    {toc &&\n                      toc.map((item, index) => (\n                        <a\n                          className={`filter-item py-1 ${index === 0 ? \"text-emphasized\" : \"\"\n                            }`}\n                          style={\n                            item.tagName === \"H1\"\n                              ? { paddingLeft: \"12px\" }\n                              : item.tagName === \"H1\"\n                                ? { paddingLeft: \"24px\" }\n                                : item.tagName === \"H3\"\n                                  ? { paddingLeft: \"36px\" }\n                                  : {}\n                          }\n                          role=\"menuitem\"\n                          {...(active === item.hash\n                            ? { \"aria-current\": \"page\" }\n                            : {})}\n                          href={\"#\" + item.hash}\n                          key={index}\n                        >\n                          {item.title}\n                        </a>\n                      ))}\n                  </div>\n                </div>\n              </div>\n            </details>\n\n            <h2 className=\"Box-title\">\n              <a\n                className=\"Link--primary\"\n                href={`#${title.toLowerCase().replace(/ |\\?|:/g, \"_\")}`}\n              >\n                {title}.md\n              </a>\n            </h2>\n          </div>\n        </div>\n        <div className=\"Box-body\">\n          <article\n            className=\"markdown-body entry-content container-lg\"\n            id=\"content\"\n          >\n            <h1 id={title.toLowerCase().replace(/ |\\?|:/g, \"_\")}>{title}</h1>\n            <div dangerouslySetInnerHTML={article} />\n          </article>\n        </div>\n      </Box>\n    </div>\n  );\n}\n\nexport default ArticleWrapper;\n","const MEMBERSHIP_PROMPT_ID = \"paywall-background-color\";\nconst METERED_CONTENT_CLASSNAME = \"meteredContent\";\n\nexport function urlWithoutQueryParams(url) {\n  if (!url) {\n    return \"\";\n  }\n  return url.split(\"?\")[0];\n}\n\nfunction hasMembershipPromptNew(document) {\n  const article = document.getElementsByTagName(\"article\")[0];\n  if (!article) {\n    return false;\n  }\n  const computedStyles = (document.defaultView || window).getComputedStyle(\n    article.nextSibling\n  );\n  if (!computedStyles.background) {\n    return false;\n  }\n  return computedStyles.background.indexOf(\"linear-gradient\") > -1;\n}\n\nexport function hasMembershipPrompt(document) {\n  return (\n    document.getElementById(MEMBERSHIP_PROMPT_ID) ||\n    hasMembershipPromptNew(document)\n  );\n}\n\nexport function getMeteredContentElement(doc) {\n  return (doc || document).getElementsByClassName(METERED_CONTENT_CLASSNAME)[0];\n}\n","import { useState } from \"react\";\nimport { BaseStyles } from \"@primer/components\";\nimport { Readability } from \"@mozilla/readability\";\nimport TurndownService from \"turndown\";\nimport JSZip from \"jszip\";\nimport { saveAs } from \"file-saver\";\nimport Input from \"./components/Input\";\nimport ArticleWrapper from \"./components/ArticleWrapper\";\nimport { getMeteredContentElement } from \"./utils\";\n\nfunction App() {\n  const [simplifiedArticle, setSimplifiedArticle] = useState({ __html: \"\" });\n  const [articleTitle, setArticleTitle] = useState(\"\");\n  const [author, setAuthor] = useState(\"\");\n  const [siteName, setSiteName] = useState(\"\");\n  const [value, setValue] = useState(\"\");\n  const [siteUrl, setSiteUrl] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const options = {\n    serializer: (el) => {\n      const headings = el.querySelectorAll(\"h2, h3\");\n      for (let x of headings) {\n        let title = x.innerText.toLowerCase().replace(/ |\\?|:/g, \"_\");\n        x.setAttribute(\"id\", title);\n      }\n      return el.innerHTML;\n    },\n  };\n\n  const handleSubmit = async (e) => {\n    try {\n      setIsLoading(true);\n      const response = await getArticleContent(value);\n      setSimplifiedArticle(response);\n      await getBlobs();\n      stripIframes();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleExample = async (e) => {\n    const example =\n      \"https://medium.com/hackernoon/boost-your-productivity-using-markdown-b8a84fc2a089\";\n    try {\n      setIsLoading(true);\n      const response = await getArticleContent(example);\n      setSimplifiedArticle(response);\n      await getBlobs();\n      stripIframes();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const stripIframes = () => {\n    const iFrame = document.querySelectorAll(\"iframe\");\n    console.log(iFrame);\n    for (let x of iFrame) {\n      x.parentNode.removeChild(x);\n    }\n  };\n\n  const getRedirectUrl = async (value) => {\n    const responseStream = await fetch(\"/.netlify/functions/getRedirectUrl\", {\n      method: \"POST\",\n      body: value,\n    }).then((res) => res.json());\n    return responseStream;\n  };\n\n  const getArticleContent = async (url) => {\n    let parser = new DOMParser();\n    setSiteUrl(url);\n\n    try {\n      let response = await fetch(`/cors-proxy/${url}`);\n      let responseStream = await response.text();\n      let doc = parser.parseFromString(responseStream, \"text/html\");\n\n      // Medium.com specific\n      const articleContent = getMeteredContentElement(doc);\n      if (articleContent) {\n        responseStream = await fetch(\"/.netlify/functions/getMeteredContent\", {\n          method: \"POST\",\n          body: value,\n        }).then((res) => res.json());\n        doc = parser.parseFromString(responseStream, \"text/html\");\n      }\n\n      if (response.status === 409) {\n        const response = await fetch(\n          \"http://localhost:8888/.netlify/functions/getContent\",\n          {\n            method: \"POST\",\n            body: value,\n          }\n        );\n        responseStream = await response.json();\n      }\n\n      let reader = new Readability(doc, options);\n      let article = reader.parse();\n\n      setArticleTitle(article.title);\n      setAuthor(article.byline);\n      setSiteName(article.siteName);\n      return { __html: article.content };\n    } catch (error) {\n      const responseStream = await getRedirectUrl(url);\n      const doc = parser.parseFromString(responseStream, \"text/html\");\n      let reader = new Readability(doc, options);\n      let article = reader.parse();\n      setArticleTitle(article.title);\n      setAuthor(article.byline);\n      setSiteName(article.siteName);\n      return { __html: article.content };\n    }\n  };\n\n  const getBlobs = async () => {\n    var images = document.querySelectorAll(\"img\");\n    for (let img of images) {\n      try {\n        const blob = await fetch(`/cors-proxy/${img.src}`).then((res) =>\n          res.blob()\n        );\n        const objectURL = URL.createObjectURL(blob);\n        img.setAttribute(\"data-orgsrc\", img.src);\n        img.src = objectURL;\n        img.srcset = \"\";\n        img.removeAttribute(\"height\");\n        img.removeAttribute(\"width\");\n      } catch (error) {\n        try {\n          console.log(error);\n          const proxiedImageUrl = await fetch(\n            \"http://localhost:8888/.netlify/functions/getProxiedImageUrl\",\n            {\n              method: \"POST\",\n              body: img.src,\n            }\n          ).then((res) => res.json());\n          img.setAttribute(\"data-orgsrc\", proxiedImageUrl);\n          const blob = await fetch(`/cors-proxy/${proxiedImageUrl}`).then(\n            (res) => res.blob()\n          );\n          const objectURL = URL.createObjectURL(blob);\n          img.src = objectURL;\n          img.srcset = \"\";\n          img.removeAttribute(\"height\");\n          img.removeAttribute(\"width\");\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }\n  };\n\n  const getMarkDown = () => {\n    const images = document.querySelectorAll(\"img\");\n    for (let x of images) {\n      if (x.parentElement.tagName === \"A\") {\n        x.parentElement.outerHTML = x.parentElement.innerHTML;\n      }\n    }\n    let turndownService = new TurndownService();\n    function cleanAttribute(attribute) {\n      return attribute ? attribute.replace(/(\\n+\\s*)+/g, \"\\n\") : \"\";\n    }\n    turndownService.addRule(\"image\", {\n      filter: [\"img\"],\n      replacement: function (content, node) {\n        var alt = cleanAttribute(node.getAttribute(\"alt\"));\n        var src = node.getAttribute(\"data-mdsrc\") || \"\";\n        var title = cleanAttribute(node.getAttribute(\"title\"));\n        var titlePart = title ? ' \"' + title + '\"' : \"\";\n        return src ? `![${alt}](${src + titlePart})` : \"\";\n      },\n    });\n\n    var markdown = turndownService.turndown(\n      document.getElementById(\"readability-page-1\")\n    );\n\n    return new Blob([markdown], { type: \"text/csv\" });\n  };\n\n  const getTextbundle = async () => {\n    let zip = new JSZip();\n    let folder = zip.folder(\"/assets\");\n    const images = document.querySelectorAll(\"img\");\n    for (let img of images) {\n      const imageUrl = `/cors-proxy/${img.dataset.orgsrc}`;\n      const filename = imageUrl.substr(imageUrl.lastIndexOf(\"/\"));\n      const filenameDecoded = decodeURI(filename);\n      const blob = await fetch(imageUrl).then((res) => res.blob());\n      const imageFile = new File([blob], filenameDecoded);\n      img.setAttribute(\"data-mdsrc\", `assets${filenameDecoded}`);\n      folder.file(filenameDecoded, imageFile);\n    }\n    let markdown = getMarkDown();\n    const markdownFile = new File([markdown], \"text.md\");\n    zip.file(`${articleTitle}.md`, markdownFile);\n    zip.generateAsync({ type: \"blob\" }).then(function (blob) {\n      saveAs(blob, `${articleTitle}.zip`);\n    });\n  };\n\n  return (\n    <>\n      <BaseStyles>\n        {simplifiedArticle.__html.length < 1 ? (\n          <Input\n            onSubmit={handleSubmit}\n            value={value}\n            setParentValue={setValue}\n            isLoading={isLoading}\n            handleExample={handleExample}\n          />\n        ) : (\n          <ArticleWrapper\n            article={simplifiedArticle}\n            close={() => {\n              setSimplifiedArticle({ __html: \"\" });\n              setValue(\"\");\n            }}\n            title={articleTitle}\n            author={author}\n            siteName={siteName}\n            siteUrl={siteUrl}\n            getTextbundle={() => getTextbundle()}\n            setIsLoading={() => setIsLoading(false)}\n          />\n        )}\n      </BaseStyles>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {ThemeProvider} from '@primer/components'\n\n\nReactDOM.render(\n  <React.StrictMode>\n       <ThemeProvider>\n    <App />\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}